<<div class="container mx-auto p-4 md:p-8 max-w-6xl animate-in fade-in duration-500">
  
  @if (!cart() || cart()?.items?.length === 0) {
    <div class="flex flex-col items-center justify-center min-h-[400px] text-center">
      <h1 class="text-3xl font-serif text-gray-800 mb-4 italic">Your cart is empty</h1>
      <p class="text-gray-500 mb-8 font-light italic">Explore our products and find something you love.</p>
      <button 
        [routerLink]="['/products']"
        class="bg-[#ADCFE1] text-[10px] text-gray-600 font-serif italic py-3 px-8 hover:bg-[#99bfd4] transition-colors">
        BACK TO PRODUCTS
      </button>
    </div>
  } @else {
    <div class="flex flex-col lg:flex-row gap-12">
      <div class="w-full lg:w-2/3">
        <h1 class="text-3xl font-serif text-gray-800 mb-8 italic">Cart</h1>

        <div class="flex justify-between border-b border-gray-300 pb-2 mb-6">
          <span class="text-sm font-bold text-gray-700 uppercase">Product</span>
          <span class="text-sm font-bold text-gray-700 uppercase">Subtotal</span>
        </div>

        <div class="space-y-8">
          @for (item of cart()?.items; track $index) {
            <div class="flex items-start justify-between pb-8 border-b border-gray-100 last:border-0">
              <div class="flex gap-6">
                <div class="w-24 h-24 bg-gray-50 overflow-hidden">
                  <img [src]="item.productId.image" [alt]="item.productId.name" class="w-full h-full object-cover" />
                </div>

                <div class="flex flex-col">
                  <div class="mb-2">
                    <h3 class="text-xs font-serif italic text-gray-800 leading-tight max-w-[200px]">
                      {{ item.productId.brand }} - {{ item.productId.name }}
                    </h3>
                    <p class="text-[11px] text-gray-500 mt-1 uppercase">
                      price: {{ item.price | number:'1.2-2' }}
                    </p>
                  </div>

                  <div class="flex items-center w-fit bg-[#C4DCE9] overflow-hidden">
                    <button (click)="decreaseQuantity(item)" [disabled]="item.quantity <= 1" class="px-3 py-1 hover:bg-[#b5d2e2] text-gray-700 font-light">-</button>
                    <span class="px-4 py-1 text-xs text-gray-700 bg-[#C4DCE9]">{{ item.quantity }}</span>
                    <button (click)="increaseQuantity(item)" class="px-3 py-1 hover:bg-[#b5d2e2] text-gray-700 font-light">+</button>
                  </div>
                </div>
              </div>

              <div class="flex flex-col items-end gap-4">
                <p class="text-xs text-gray-600 font-medium uppercase">
                  US$ {{ (item.price * item.quantity) | number:'1.2-2' }}
                </p>
                <button (click)="removeProduct(item.productId._id)" class="text-gray-400 hover:text-red-500 transition-colors">
                  <i class="fas fa-trash-alt text-sm"></i>
                </button>
              </div>
            </div>
          }
        </div>
      </div>

      <div class="w-full lg:w-1/3">
        <div class="bg-[#F6F6F6] p-10 min-h-[400px] flex flex-col justify-between">
          <div>
            <h2 class="text-xl font-serif text-gray-800 mb-10">Resumen</h2>
            <div class="space-y-6">
              <div class="flex justify-between text-xs tracking-wide text-gray-600 uppercase">
                <span>Subtotal</span>
                <span>US$ {{ cart()?.subtotal | number:'1.2-2' }}</span>
              </div>
              <div class="flex justify-between text-xs tracking-wide text-gray-600 uppercase">
                <span>Delivery</span>
                <span>US$ {{ cart()?.shippingCost | number:'1.2-2' }}</span>
              </div>
            </div>
            <div class="border-t border-gray-400 my-8"></div>
            <div class="flex justify-between items-center mb-12">
              <span class="text-xl font-serif text-gray-800">Total</span>
              <span class="text-xs font-bold text-gray-800 uppercase">US$ {{ cart()?.total | number:'1.2-2' }}</span>
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4">
            <button [routerLink]="['/products']" class="bg-[#ADCFE1] text-[10px] text-gray-600 font-serif italic py-3 px-2 hover:bg-[#99bfd4] transition-colors">
              Back to Products
            </button>
            <button (click)="goToCheckout()" class="bg-[#FFADAD] text-[10px] text-gray-600 font-serif font-bold uppercase tracking-widest py-3 px-2 hover:bg-[#ff9494] transition-colors">
              CONTINUE
            </button>
          </div>
        </div>
      </div> </div> }

</div>